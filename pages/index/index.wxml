<view class="container">

  <!-- å……ç”µå‚æ•°è¾“å…¥åŒºåŸŸ -->
  <view class="section input-section">
    <view class="section-title">ğŸ“± å……ç”µå‚æ•°è¾“å…¥</view>
    <view class="input-group">
      <view class="input-item {{batteryCapacityError ? 'error' : ''}}">
        <view class="input-label-row">
          <text class="input-label">ç”µæ± å®¹é‡(kWh)</text>
        </view>
        <view class="input-container">
          <input type="digit" value="{{batteryCapacity}}" bindinput="onBatteryCapacityInput" class="input-field" placeholder=">0" />
          <text class="input-icon">âš¡</text>
        </view>
        <text wx:if="{{batteryCapacityError}}" class="error-text">{{batteryCapacityError}}</text>
      </view>
      
      <view class="input-item {{currentBatteryError ? 'error' : ''}}">
        <view class="input-label-row">
          <text class="input-label">å½“å‰ç”µé‡(%)</text>
        </view>
        <view class="input-container">
          <input type="digit" value="{{currentBattery}}" bindinput="onCurrentBatteryInput" class="input-field" placeholder="0-100" />
          <text class="input-icon">ğŸ”‹</text>
        </view>
        <text wx:if="{{currentBatteryError}}" class="error-text">{{currentBatteryError}}</text>
      </view>
      
      <view class="input-item {{electricityPriceError ? 'error' : ''}}">
        <view class="input-label-row">
          <text class="input-label">ç”µä»·(å…ƒ/åº¦)</text>
          <view class="switch-container invisible">
            <switch scale="0.7" style="transform: scale(0.7); visibility: hidden;" />
            <text class="switch-label" style="visibility: hidden;">å……æ»¡</text>
          </view>
        </view>
        <view class="input-container">
          <input type="digit" value="{{electricityPrice}}" bindinput="onElectricityPriceInput" class="input-field" placeholder="å¦‚: 1.0" />
          <text class="input-icon">ğŸ’°</text>
        </view>
        <text wx:if="{{electricityPriceError}}" class="error-text">{{electricityPriceError}}</text>
      </view>
      
      <view class="input-item {{chargingAmountError ? 'error' : ''}}">
        <view class="input-label-row">
          <text class="input-label">å……ç”µé‡‘é¢(å…ƒ)</text>
          <view class="switch-container">
            <switch checked="{{isFullCharge}}" bindchange="onFullChargeChange" scale="0.7" color="#1aad19" style="transform: scale(0.7);" />
            <text class="switch-label">å……æ»¡</text>
          </view>
        </view>
        <view class="input-container">
          <input type="digit" value="{{chargingAmount}}" bindinput="onChargingAmountInput" class="input-field" placeholder="å¦‚: 50" disabled="{{isFullCharge}}" />
          <text class="input-icon">ğŸ’³</text>
        </view>
        <text wx:if="{{chargingAmountError}}" class="error-text">{{chargingAmountError}}</text>
      </view>
    </view>
  </view>

  <!-- é¢„ä¼°ç»“æœæ˜¾ç¤ºåŒºåŸŸ -->
  <view class="section result-section">
    <view class="section-title">ğŸ“Š é¢„ä¼°ç»“æœ</view>
    <view class="result-group">
      <view class="result-item">
      <view class="result-value-column">
        <text class="result-label">å……ç”µåç”µé‡:</text>
          <text class="result-value">{{currentBattery || '--'}}% â†’ {{estimatedFinalBattery || '--'}}%</text>
          <text class="data-source">(é¢„ä¼°å€¼)</text>
        </view>
      </view>
      
      <view class="result-item">
        <view class="result-value-column">
          <text class="result-label">å……ç”µæŸè€—ç‡:</text>
          <text class="result-value">{{formattedChargingLossRate || '--'}}%</text>
          <text class="data-source">{{chargingLossRateSource}} - å¸¸è§„æŸè€—çº¦12%</text>
        </view>
      </view>
      
      <view class="result-item">
        <text class="result-label">å¯å……ç”µé‡:</text>
        <text class="result-value">{{purchasedElectricity || '--'}} åº¦</text>
      </view>
      
      <view class="result-item">
        <text class="result-label">é¢„ä¼°å……å…¥:</text>
        <text class="result-value">{{estimatedBatteryIncrease || '--'}} åº¦</text>
      </view>
    </view>
  </view>

  <!-- å®é™…æ•°æ®å½•å…¥åŒºåŸŸ -->
  <view class="section actual-section">
    <view class="section-title">
      âœ… å®é™…æ•°æ®å½•å…¥
    </view>
    
    <view class="actual-group">
      <view class="input-group">
        <view class="input-item {{actualChargingFeeError ? 'error' : ''}}" style="width: 48%;">
          <view class="input-label-row">
            <text class="input-label">å……ç”µè´¹ç”¨(å…ƒ)</text>
            <view class="switch-container invisible">
              <switch scale="0.7" style="transform: scale(0.7); visibility: hidden;" />
              <text class="switch-label" style="visibility: hidden;">éšè—</text>
            </view>
          </view>
          <input type="digit" value="{{actualChargingFee}}" bindinput="onActualChargingFeeInput" class="input-field" placeholder="äº¤ç»™å……ç”µæ¡©çš„é‡‘é¢" />
          <text wx:if="{{actualChargingFeeError}}" class="error-text">{{actualChargingFeeError}}</text>
        </view>
        
        <view class="input-item {{actualFinalBatteryError ? 'error' : ''}}" style="width: 48%;">
          <view class="input-label-row">
            <text class="input-label">è¾¾åˆ°ç”µé‡(%)</text>
            <view class="switch-container">
              <switch checked="{{isFullBattery}}" bindchange="onFullBatteryChange" scale="0.7" color="#1aad19" style="transform: scale(0.7);" />
              <text class="switch-label">æ»¡ç”µ</text>
            </view>
          </view>
          <input type="digit" value="{{actualFinalBattery}}" bindinput="onActualFinalBatteryInput" class="input-field" placeholder="è½¦æ˜¾ç”µé‡" disabled="{{isFullBattery}}" />
          <text wx:if="{{actualFinalBatteryError}}" class="error-text">{{actualFinalBatteryError}}</text>
        </view>
      </view>
      
      <button class="save-button" bindtap="saveActualData" disabled="{{!canSaveActualData}}">ä¿å­˜å®é™…æ•°æ®</button>
    </view>
  </view>

  <!-- å†å²æ•°æ®å·²ä¿å­˜ä½†ä¸æ˜¾ç¤º -->
  <!-- å†å²æ•°æ®ä»…ç”¨äºè®¡ç®—å……ç”µæŸè€—ç‡ -->
</view>
